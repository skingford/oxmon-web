{"openapi":"3.1.0","info":{"title":"oxmon API","description":"oxmon 服务器监控 REST API","license":{"name":""},"version":"0.1.5"},"paths":{"/v1/agents":{"get":{"tags":["Agents"],"summary":"分页查询 Agent 列表（支持按 agent_id__contains、status__eq、last_seen__gte/lte 过滤）。\n默认排序：`last_seen` 倒序；默认分页：`limit=20&offset=0`。","operationId":"list_agents","parameters":[{"name":"agent_id__contains","in":"query","description":"Agent ID 包含匹配（agent_id__contains，可选）","required":false,"schema":{"type":"string"}},{"name":"status__eq","in":"query","description":"状态精确匹配（status__eq，可选，active/inactive）","required":false,"schema":{"type":"string"}},{"name":"last_seen__gte","in":"query","description":"最后上报时间下界（last_seen__gte，可选，Unix 秒级时间戳）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"last_seen__lte","in":"query","description":"最后上报时间上界（last_seen__lte，可选，Unix 秒级时间戳）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"limit","in":"query","description":"每页条数（默认 20）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"offset","in":"query","description":"偏移量（默认 0）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"Agent 分页列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AgentResponse"}}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/agents/whitelist":{"get":{"tags":["Agents"],"summary":"分页查询白名单 Agent 列表（包含在线状态，支持按 agent_id__contains、description__contains 过滤）。\n默认排序：`created_at` 倒序；默认分页：`limit=20&offset=0`。","operationId":"list_whitelist_agents","parameters":[{"name":"agent_id__contains","in":"query","description":"Agent ID 包含匹配（agent_id__contains，可选）","required":false,"schema":{"type":"string"}},{"name":"description__contains","in":"query","description":"描述包含匹配（description__contains，可选）","required":false,"schema":{"type":"string"}},{"name":"limit","in":"query","description":"每页条数（默认 20）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"offset","in":"query","description":"偏移量（默认 0）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"白名单 Agent 分页列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AgentWhitelistDetail"}}}}},"401":{"description":"未认证"},"500":{"description":"服务器错误"}},"security":[{"bearer_auth":[]}]},"post":{"tags":["Agents"],"summary":"新增白名单 Agent。\n鉴权：需要 Bearer Token。","operationId":"add_agent","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddAgentRequest"}}},"required":true},"responses":{"201":{"description":"新增白名单 Agent 结果","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddAgentResponse"}}}},"401":{"description":"未认证"},"409":{"description":"Agent ID 已存在"},"500":{"description":"服务器错误"}},"security":[{"bearer_auth":[]}]}},"/v1/agents/whitelist/{id}":{"get":{"tags":["Agents"],"summary":"获取单个白名单 Agent 详情（按 ID）。\n鉴权：需要 Bearer Token。","operationId":"get_whitelist_agent","parameters":[{"name":"id","in":"path","description":"白名单条目 ID（路径参数）","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"白名单 Agent 详情","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentWhitelistDetail"}}}},"401":{"description":"未认证"},"404":{"description":"Agent 不存在"},"500":{"description":"服务器错误"}},"security":[{"bearer_auth":[]}]},"put":{"tags":["Agents"],"summary":"更新白名单 Agent 信息（按 ID）。\n鉴权：需要 Bearer Token。","operationId":"update_agent","parameters":[{"name":"id","in":"path","description":"白名单条目 ID（路径参数）","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateAgentRequest"}}},"required":true},"responses":{"200":{"description":"更新白名单 Agent 结果","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"401":{"description":"未认证"},"404":{"description":"Agent 不存在"},"500":{"description":"服务器错误"}},"security":[{"bearer_auth":[]}]},"delete":{"tags":["Agents"],"summary":"删除白名单 Agent（按 ID）。\n鉴权：需要 Bearer Token。","operationId":"delete_agent","parameters":[{"name":"id","in":"path","description":"白名单条目 ID（路径参数）","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"删除成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"401":{"description":"未认证"},"404":{"description":"Agent 不存在"},"500":{"description":"服务器错误"}},"security":[{"bearer_auth":[]}]}},"/v1/agents/whitelist/{id}/token":{"post":{"tags":["Agents"],"summary":"重新生成白名单 Agent 的认证 Token（按 ID）。\n鉴权：需要 Bearer Token。","operationId":"regenerate_token","parameters":[{"name":"id","in":"path","description":"白名单条目 ID（路径参数）","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"重新生成 Token 结果","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegenerateTokenResponse"}}}},"401":{"description":"未认证"},"404":{"description":"Agent 不存在"},"500":{"description":"服务器错误"}},"security":[{"bearer_auth":[]}]}},"/v1/agents/{id}":{"get":{"tags":["Agents"],"summary":"获取指定 Agent 的详细信息。\n支持通过 agent_id 或数据库 id 查询。","operationId":"get_agent","parameters":[{"name":"id","in":"path","description":"Agent ID 或数据库 ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Agent 详细信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentDetail"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Agent 不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]},"put":{"tags":["Agents"],"summary":"更新指定 Agent 的信息（描述、采集间隔）。\n支持通过 agent_id 或数据库 id 查询。如果 Agent 同时在白名单中，同步更新白名单。","operationId":"update_agent_info","parameters":[{"name":"id","in":"path","description":"Agent ID 或数据库 ID","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateAgentRequest"}}},"required":true},"responses":{"200":{"description":"更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Agent 不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]},"delete":{"tags":["Agents"],"summary":"删除指定 Agent 记录。\n支持通过 agent_id 或数据库 id 查询。同时清理白名单和内存注册表。","operationId":"delete_agent_record","parameters":[{"name":"id","in":"path","description":"Agent ID 或数据库 ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"删除成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Agent 不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"服务器错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/agents/{id}/latest":{"get":{"tags":["Agents"],"summary":"获取指定 Agent 的最新指标数据。\n鉴权：需要 Bearer Token。","operationId":"agent_latest","parameters":[{"name":"id","in":"path","description":"Agent ID（agent.id）","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Agent 最新指标数据","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/LatestMetric"}}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Agent 不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/ai/accounts":{"get":{"tags":["AI 管理"],"summary":"列出 AI 账号","operationId":"list_ai_accounts","parameters":[{"name":"provider","in":"query","description":"按 provider 过滤 (zhipu, kimi, minimax, claude, codex, custom)","required":false,"schema":{"type":"string"}},{"name":"enabled","in":"query","description":"按启用状态过滤","required":false,"schema":{"type":"boolean"}},{"name":"limit","in":"query","description":"每页记录数（默认 20）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"offset","in":"query","description":"偏移量（默认 0）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"AI 账号列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AIAccountResponse"}}}}}}},"post":{"tags":["AI 管理"],"summary":"创建 AI 账号","operationId":"create_ai_account","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAIAccountRequest"}}},"required":true},"responses":{"201":{"description":"AI 账号创建成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AIAccountResponse"}}}}}}},"/v1/ai/accounts/{id}":{"get":{"tags":["AI 管理"],"summary":"获取单个 AI 账号","operationId":"get_ai_account","parameters":[{"name":"id","in":"path","description":"AI 账号 ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"AI 账号详情","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AIAccountResponse"}}}},"404":{"description":"AI 账号不存在"}}},"put":{"tags":["AI 管理"],"summary":"更新 AI 账号","operationId":"update_ai_account","parameters":[{"name":"id","in":"path","description":"AI 账号 ID","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateAIAccountRequest"}}},"required":true},"responses":{"200":{"description":"AI 账号更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AIAccountResponse"}}}},"404":{"description":"AI 账号不存在"}}},"delete":{"tags":["AI 管理"],"summary":"删除 AI 账号","operationId":"delete_ai_account","parameters":[{"name":"id","in":"path","description":"AI 账号 ID","required":true,"schema":{"type":"string"}}],"responses":{"204":{"description":"AI 账号删除成功"},"404":{"description":"AI 账号不存在"}}}},"/v1/ai/reports":{"get":{"tags":["AI 报告"],"summary":"列出 AI 报告","operationId":"list_ai_reports","parameters":[{"name":"report_date","in":"query","description":"按日期过滤 (YYYY-MM-DD)","required":false,"schema":{"type":"string"}},{"name":"risk_level","in":"query","description":"按风险等级过滤 (high, medium, low, normal)","required":false,"schema":{"type":"string"}},{"name":"limit","in":"query","description":"每页记录数（默认 20）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"offset","in":"query","description":"偏移量（默认 0）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"AI 报告列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AIReportListItem"}}}}}}}},"/v1/ai/reports/{id}":{"get":{"tags":["AI 报告"],"summary":"获取 AI 报告详情 (JSON)","operationId":"get_ai_report","parameters":[{"name":"id","in":"path","description":"报告 ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"AI 报告详情","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AIReportRow"}}}},"404":{"description":"报告不存在"}}}},"/v1/ai/reports/{id}/view":{"get":{"tags":["AI 报告"],"summary":"查看 AI 报告 HTML (用于浏览器访问)","operationId":"view_ai_report_html","parameters":[{"name":"id","in":"path","description":"报告 ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"HTML 报告页面","content":{"text/html":{}}},"404":{"description":"报告不存在"}}}},"/v1/alerts/active":{"get":{"tags":["Alerts"],"summary":"查询当前活跃（未解决）告警。","operationId":"active_alerts","parameters":[{"name":"agent_id__contains","in":"query","description":"Agent ID 模糊匹配","required":false,"schema":{"type":"string"}},{"name":"severity__eq","in":"query","description":"告警级别精确匹配（info / warning / critical）","required":false,"schema":{"type":"string"}},{"name":"rule_id__eq","in":"query","description":"规则 ID 精确匹配","required":false,"schema":{"type":"string"}},{"name":"metric_name__eq","in":"query","description":"指标名称精确匹配","required":false,"schema":{"type":"string"}},{"name":"limit","in":"query","description":"每页条数（默认 20）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"offset","in":"query","description":"偏移量（默认 0）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"活跃告警列表"},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/alerts/history":{"get":{"tags":["Alerts"],"summary":"分页查询告警事件历史（支持按 agent_id__eq、severity__eq、时间范围过滤）。\n默认排序：`timestamp` 倒序；默认分页：`limit=20&offset=0`。","operationId":"alert_history","parameters":[{"name":"agent_id__eq","in":"query","description":"Agent ID 精确匹配（agent_id__eq，可选）","required":false,"schema":{"type":"string"}},{"name":"severity__eq","in":"query","description":"告警级别精确匹配（severity__eq,可选)","required":false,"schema":{"type":"string"}},{"name":"timestamp__gte","in":"query","description":"时间下界（timestamp >=，默认为当前时间前 1 天）","required":false,"schema":{"type":"string","format":"date-time"}},{"name":"timestamp__lte","in":"query","description":"时间上界（timestamp <=，默认为当前时间）","required":false,"schema":{"type":"string","format":"date-time"}},{"name":"limit","in":"query","description":"每页条数（默认 20）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"offset","in":"query","description":"偏移量（默认 0）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"告警事件分页列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AlertEventResponse"}}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/alerts/history/{id}":{"get":{"tags":["Alerts"],"summary":"获取单个告警事件详情（按 ID）。","operationId":"get_alert_event","parameters":[{"name":"id","in":"path","description":"告警事件 ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"告警事件详情","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlertEventResponse"}}}},"404":{"description":"告警事件不存在"},"500":{"description":"服务器错误"}}}},"/v1/alerts/history/{id}/acknowledge":{"post":{"tags":["Alerts"],"summary":"确认告警事件。","operationId":"acknowledge_alert","parameters":[{"name":"id","in":"path","description":"告警事件 ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"告警已确认","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"告警不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/alerts/history/{id}/resolve":{"post":{"tags":["Alerts"],"summary":"解决告警事件。","operationId":"resolve_alert","parameters":[{"name":"id","in":"path","description":"告警事件 ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"告警已解决","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"告警不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/alerts/rules":{"get":{"tags":["Alerts"],"summary":"分页查询告警规则列表。\n默认排序：`created_at` 倒序；默认分页：`limit=20&offset=0`。","operationId":"list_alert_rules","parameters":[{"name":"name__contains","in":"query","description":"规则名称模糊匹配","required":false,"schema":{"type":"string"}},{"name":"rule_type__eq","in":"query","description":"规则类型精确匹配（threshold / rate_of_change / trend_prediction / cert_expiration）","required":false,"schema":{"type":"string"}},{"name":"metric__contains","in":"query","description":"监控指标模糊匹配","required":false,"schema":{"type":"string"}},{"name":"severity__eq","in":"query","description":"告警级别精确匹配（info / warning / critical）","required":false,"schema":{"type":"string"}},{"name":"enabled__eq","in":"query","description":"是否启用精确匹配","required":false,"schema":{"type":"boolean"}},{"name":"limit","in":"query","description":"每页条数（默认 20）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"offset","in":"query","description":"偏移量（默认 0）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"告警规则分页列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AlertRuleResponse"}}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]},"post":{"tags":["Alerts"],"summary":"创建告警规则。","operationId":"create_alert_rule","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAlertRuleRequest"}}},"required":true},"responses":{"201":{"description":"告警规则已创建","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/alerts/rules/{id}":{"get":{"tags":["Alerts"],"summary":"获取单条告警规则详情。","operationId":"get_alert_rule","parameters":[{"name":"id","in":"path","description":"告警规则 ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"告警规则详情","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlertRuleDetailResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"规则不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]},"put":{"tags":["Alerts"],"summary":"更新告警规则。","operationId":"update_alert_rule","parameters":[{"name":"id","in":"path","description":"告警规则 ID","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateAlertRuleRequest"}}},"required":true},"responses":{"200":{"description":"告警规则已更新","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"规则不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]},"delete":{"tags":["Alerts"],"summary":"删除告警规则。","operationId":"delete_alert_rule","parameters":[{"name":"id","in":"path","description":"告警规则 ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"告警规则已删除","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"规则不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/alerts/rules/{id}/enable":{"put":{"tags":["Alerts"],"summary":"启用或禁用告警规则。","operationId":"set_alert_rule_enabled","parameters":[{"name":"id","in":"path","description":"告警规则 ID","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnableRequest"}}},"required":true},"responses":{"200":{"description":"告警规则状态已更新","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"规则不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/alerts/summary":{"get":{"tags":["Alerts"],"summary":"告警统计摘要。","description":"可选查询参数 `hours`（默认 24）控制统计时间范围。","operationId":"alert_summary","parameters":[{"name":"hours","in":"query","description":"统计时间范围（小时），默认 24","required":false,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"告警统计摘要"},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/auth/login":{"post":{"tags":["Auth"],"summary":"用户登录并获取 JWT。\n鉴权：无需 Bearer Token，但需要 ox-app-id 请求头（如果在配置中启用）。\n密码需使用 RSA-OAEP(SHA-256) 加密后以 Base64 传输。","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"登录结果","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"400":{"description":"请求参数错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"认证失败（用户名或密码错误）","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"403":{"description":"缺少或无效的 ox-app-id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"app_id_auth":[]}]}},"/v1/auth/password":{"post":{"tags":["Auth"],"summary":"修改当前登录用户密码。\n鉴权：需要 Bearer Token。\n密码需使用 RSA-OAEP(SHA-256) 加密后以 Base64 传输。","operationId":"change_password","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordRequest"}}},"required":true},"responses":{"200":{"description":"密码修改成功（需重新登录）","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"400":{"description":"请求参数错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"认证失败或当前密码错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"服务器内部错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/auth/public-key":{"get":{"tags":["Auth"],"summary":"获取 RSA 公钥（用于前端加密密码）。\n鉴权：无需 Bearer Token，但需要 ox-app-id 请求头（如果在配置中启用）。","operationId":"get_public_key","responses":{"200":{"description":"RSA 公钥","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicKeyResponse"}}}},"403":{"description":"缺少或无效的 ox-app-id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"app_id_auth":[]}]}},"/v1/certificates":{"get":{"tags":["Certificates"],"summary":"分页查询证书详情列表（支持过滤）。\n默认排序：`not_after` 升序；默认分页：`limit=20&offset=0`。\n仅返回当前仍在“监控域名（cert_domains）”中的证书详情，避免展示历史孤儿证书记录。","operationId":"list_certificates","parameters":[{"name":"domain__contains","in":"query","description":"域名包含匹配（domain__contains，可选）","required":false,"schema":{"type":"string"}},{"name":"not_after__lte","in":"query","description":"证书过期时间上界（not_after__lte，可选，Unix 秒级时间戳）","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"not_after__gte","in":"query","description":"证书过期时间下界（not_after__gte，可选，Unix 秒级时间戳）","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"chain_valid__eq","in":"query","description":"证书链是否有效（chain_valid__eq，可选）","required":false,"schema":{"type":"boolean"}},{"name":"is_valid__eq","in":"query","description":"证书是否有效（is_valid__eq，可选；证书列表语义，等价 chain_valid）","required":false,"schema":{"type":"boolean"}},{"name":"chain_error__eq","in":"query","description":"证书链错误精确匹配（chain_error__eq，可选）","required":false,"schema":{"type":"string"}},{"name":"last_checked__gte","in":"query","description":"最后检查时间下界（last_checked__gte，可选，Unix 秒级时间戳）","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"last_checked__lte","in":"query","description":"最后检查时间上界（last_checked__lte，可选，Unix 秒级时间戳）","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"ip_address__contains","in":"query","description":"IP 包含匹配（ip_address__contains，可选）","required":false,"schema":{"type":"string"}},{"name":"issuer__contains","in":"query","description":"颁发者包含匹配（issuer__contains，可选）","required":false,"schema":{"type":"string"}},{"name":"tls_version__eq","in":"query","description":"TLS 版本精确匹配（tls_version__eq，可选）","required":false,"schema":{"type":"string"}},{"name":"limit","in":"query","description":"每页条数（默认 20）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"offset","in":"query","description":"偏移量（默认 0）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"证书详情分页列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CertificateDetails"}}}}},"401":{"description":"未认证"},"500":{"description":"服务器错误"}},"security":[{"bearer_auth":[]}]}},"/v1/certificates/{id}":{"get":{"tags":["Certificates"],"summary":"获取指定证书详情（按 ID）。\n鉴权：需要 Bearer Token。","operationId":"get_certificate","parameters":[{"name":"id","in":"path","description":"证书 ID（路径参数）","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"证书详情","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CertificateDetails"}}}},"401":{"description":"未认证"},"404":{"description":"证书不存在"},"500":{"description":"服务器错误"}},"security":[{"bearer_auth":[]}]}},"/v1/certificates/{id}/chain":{"get":{"tags":["Certificates"],"summary":"获取指定证书的证书链验证详情（按 ID）。\n鉴权：需要 Bearer Token。","operationId":"get_certificate_chain","parameters":[{"name":"id","in":"path","description":"证书 ID（路径参数）","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"证书链验证详情","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CertificateChainInfo"}}}},"401":{"description":"未认证"},"404":{"description":"证书不存在"},"500":{"description":"服务器错误"}},"security":[{"bearer_auth":[]}]}},"/v1/certs/check":{"post":{"tags":["Certificates"],"summary":"手动触发所有已启用域名证书检查。\n鉴权：需要 Bearer Token。","operationId":"check_all_domains","responses":{"200":{"description":"手动批量证书检查结果","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CertCheckResult"}}}}},"401":{"description":"未授权","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/certs/domains":{"get":{"tags":["Certificates"],"summary":"分页查询监控域名列表（支持按 enabled__eq、domain__contains 过滤）。\n默认排序：`created_at` 倒序；默认分页：`limit=20&offset=0`。","operationId":"list_domains","parameters":[{"name":"enabled__eq","in":"query","description":"启用状态精确匹配（enabled__eq，可选）","required":false,"schema":{"type":"boolean"}},{"name":"domain__contains","in":"query","description":"域名包含匹配（domain__contains，可选）","required":false,"schema":{"type":"string"}},{"name":"limit","in":"query","description":"每页条数（默认 20）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"offset","in":"query","description":"偏移量（默认 0）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"监控域名分页列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CertDomain"}}}}},"401":{"description":"未授权","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]},"post":{"tags":["Certificates"],"summary":"新增证书监控域名。\n鉴权：需要 Bearer Token。","operationId":"create_domain","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateDomainRequest"}}},"required":true},"responses":{"201":{"description":"新增监控域名结果","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"400":{"description":"请求参数错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"未授权","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"409":{"description":"域名已存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/certs/domains/batch":{"post":{"tags":["Certificates"],"summary":"批量新增证书监控域名。\n鉴权：需要 Bearer Token。","operationId":"create_domains_batch","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BatchCreateDomainsRequest"}}},"required":true},"responses":{"201":{"description":"批量新增监控域名结果","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/IdResponse"}}}}},"400":{"description":"请求参数错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"未授权","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"409":{"description":"域名重复","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/certs/domains/summary":{"get":{"tags":["Certificates"],"summary":"域名监控统计（总数/已启用/已停用）。","operationId":"cert_domains_summary","responses":{"200":{"description":"域名监控统计"},"401":{"description":"未授权","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/certs/domains/{id}":{"get":{"tags":["Certificates"],"summary":"获取监控域名详情（按 ID）。\n鉴权：需要 Bearer Token。","operationId":"get_domain","parameters":[{"name":"id","in":"path","description":"监控域名 ID（路径参数）","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"监控域名详情","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CertDomain"}}}},"401":{"description":"未授权","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"域名不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]},"put":{"tags":["Certificates"],"summary":"更新监控域名配置（按 ID）。\n鉴权：需要 Bearer Token。","operationId":"update_domain","parameters":[{"name":"id","in":"path","description":"监控域名 ID（路径参数）","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateDomainRequest"}}},"required":true},"responses":{"200":{"description":"更新监控域名结果","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"400":{"description":"请求参数错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"未授权","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"域名不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]},"delete":{"tags":["Certificates"],"summary":"删除监控域名（按 ID）。\n鉴权：需要 Bearer Token。","operationId":"delete_domain","parameters":[{"name":"id","in":"path","description":"监控域名 ID（路径参数）","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"删除成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"401":{"description":"未授权","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"域名不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/certs/domains/{id}/check":{"post":{"tags":["Certificates"],"summary":"手动触发指定域名证书检查（按 ID）。\n鉴权：需要 Bearer Token。","operationId":"check_single_domain","parameters":[{"name":"id","in":"path","description":"监控域名 ID（路径参数）","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"手动证书检查结果","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CertCheckResult"}}}},"401":{"description":"未授权","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"域名不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/certs/domains/{id}/history":{"get":{"tags":["Certificates"],"summary":"获取指定域名的证书检查历史记录。","operationId":"cert_check_history","parameters":[{"name":"id","in":"path","description":"域名 ID","required":true,"schema":{"type":"string"}},{"name":"limit","in":"query","description":"每页条数（默认 20）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"offset","in":"query","description":"偏移量（默认 0）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"证书检查历史"},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"域名不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/certs/status":{"get":{"tags":["Certificates"],"summary":"分页查询所有域名的最新证书检查结果。\n默认排序：`checked_at` 倒序；默认分页：`limit=20&offset=0`。","operationId":"cert_status_all","parameters":[{"name":"domain__contains","in":"query","description":"域名模糊匹配","required":false,"schema":{"type":"string"}},{"name":"is_valid__eq","in":"query","description":"证书是否有效精确匹配","required":false,"schema":{"type":"boolean"}},{"name":"days_until_expiry__lte","in":"query","description":"剩余有效天数上界（小于等于该值）","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"limit","in":"query","description":"每页条数（默认 20）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"offset","in":"query","description":"偏移量（默认 0）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"域名证书状态分页列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CertCheckResult"}}}}},"401":{"description":"未授权","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/certs/status/summary":{"get":{"tags":["Certificates"],"summary":"统计所有域名最新证书检查结果（不受分页影响）。","operationId":"cert_status_summary","parameters":[{"name":"domain__contains","in":"query","description":"域名模糊匹配","required":false,"schema":{"type":"string"}},{"name":"is_valid__eq","in":"query","description":"证书是否有效精确匹配","required":false,"schema":{"type":"boolean"}},{"name":"days_until_expiry__lte","in":"query","description":"剩余有效天数上界（小于等于该值）","required":false,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"域名证书状态统计"},"401":{"description":"未授权","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/certs/status/{domain}":{"get":{"tags":["Certificates"],"summary":"获取指定域名的最新证书检查结果。\n鉴权：需要 Bearer Token。","operationId":"cert_status_by_domain","parameters":[{"name":"domain","in":"path","description":"监控域名（路径参数）","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"域名最新证书检查结果","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CertCheckResult"}}}},"401":{"description":"未授权","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"域名不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/certs/summary":{"get":{"tags":["Certificates"],"summary":"证书健康摘要。","operationId":"cert_summary","responses":{"200":{"description":"证书健康摘要"},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/cloud/accounts":{"get":{"tags":["Cloud"],"summary":"列出所有云账户","operationId":"list_cloud_accounts","parameters":[{"name":"limit","in":"query","description":"每页条数（默认 20）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"offset","in":"query","description":"偏移量（默认 0）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"provider","in":"query","description":"按供应商过滤（tencent 或 alibaba）","required":false,"schema":{"type":"string"}},{"name":"enabled","in":"query","description":"按启用状态过滤","required":false,"schema":{"type":"boolean"}}],"responses":{"200":{"description":"云账户列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CloudAccountResponse"}}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]},"post":{"tags":["Cloud"],"summary":"创建云账户","operationId":"create_cloud_account","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCloudAccountRequest"}}},"required":true},"responses":{"201":{"description":"云账户已创建","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CloudAccountResponse"}}}},"400":{"description":"请求参数错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"409":{"description":"配置键已存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/cloud/accounts/batch":{"post":{"tags":["Cloud"],"summary":"批量导入云账户","operationId":"batch_create_cloud_accounts","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BatchCreateCloudAccountsRequest"}}},"required":true},"responses":{"200":{"description":"批量导入结果","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BatchCreateCloudAccountsResponse"}}}},"400":{"description":"请求参数错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/cloud/accounts/{id}":{"get":{"tags":["Cloud"],"summary":"获取单个云账户","operationId":"get_cloud_account","parameters":[{"name":"id","in":"path","description":"云账户ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"云账户详情","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CloudAccountResponse"}}}},"404":{"description":"云账户不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]},"put":{"tags":["Cloud"],"summary":"更新云账户","operationId":"update_cloud_account","parameters":[{"name":"id","in":"path","description":"云账户ID","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCloudAccountRequest"}}},"required":true},"responses":{"200":{"description":"云账户已更新","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CloudAccountResponse"}}}},"404":{"description":"云账户不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]},"delete":{"tags":["Cloud"],"summary":"删除云账户","operationId":"delete_cloud_account","parameters":[{"name":"id","in":"path","description":"云账户ID","required":true,"schema":{"type":"string"}}],"responses":{"204":{"description":"云账户已删除"},"404":{"description":"云账户不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/cloud/accounts/{id}/collect":{"post":{"tags":["Cloud"],"summary":"手动触发云账户采集","operationId":"trigger_cloud_account_collection","parameters":[{"name":"id","in":"path","description":"云账户ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"采集任务已触发","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TriggerCollectionResponse"}}}},"404":{"description":"云账户不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/cloud/accounts/{id}/test":{"post":{"tags":["Cloud"],"summary":"测试云账户连接","operationId":"test_cloud_account_connection","parameters":[{"name":"id","in":"path","description":"云账户ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"连接测试结果","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TestConnectionResponse"}}}},"404":{"description":"云账户不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/cloud/instances":{"get":{"tags":["Cloud"],"summary":"列出所有云实例","operationId":"list_cloud_instances","parameters":[{"name":"limit","in":"query","description":"每页条数（默认 20）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"offset","in":"query","description":"偏移量（默认 0）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"provider","in":"query","description":"按供应商过滤","required":false,"schema":{"type":"string"}},{"name":"region","in":"query","description":"按区域过滤","required":false,"schema":{"type":"string"}},{"name":"status","in":"query","description":"按归一化状态过滤（running/pending/stopped/error/unknown）","required":false,"schema":{"type":"string"}},{"name":"search","in":"query","description":"关键字搜索（实例ID/名称/IP/区域等）","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"云实例列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CloudInstanceResponse"}}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/cloud/instances/{id}":{"get":{"tags":["Cloud"],"summary":"获取云实例详情（含最新指标数据）","operationId":"get_cloud_instance_detail","parameters":[{"name":"id","in":"path","description":"云实例系统雪花ID（cloud_instances 表主键，例如 1234567890123456789）","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"云实例详情（含最新指标）","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CloudInstanceDetailResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"实例不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/dashboard/overview":{"get":{"tags":["Dashboard"],"summary":"获取仪表盘概览数据。\n鉴权：需要 Bearer Token。","operationId":"dashboard_overview","responses":{"200":{"description":"仪表盘概览","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DashboardOverview"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/dictionaries":{"post":{"tags":["Dictionaries"],"summary":"创建字典条目。","operationId":"create_dictionary","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateDictionaryRequest"}}},"required":true},"responses":{"201":{"description":"字典条目已创建","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"409":{"description":"dict_type + dict_key 重复","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/dictionaries/types":{"get":{"tags":["Dictionaries"],"summary":"获取所有字典类型摘要。","operationId":"list_dict_types","parameters":[{"name":"dict_type__contains","in":"query","description":"字典类型标识模糊匹配","required":false,"schema":{"type":"string"}},{"name":"limit","in":"query","description":"每页条数（默认 20）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"offset","in":"query","description":"偏移量（默认 0）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"字典类型列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DictionaryTypeSummary"}}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]},"post":{"tags":["Dictionaries"],"summary":"创建字典类型。","operationId":"create_dict_type","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateDictionaryTypeRequest"}}},"required":true},"responses":{"201":{"description":"字典类型已创建","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"409":{"description":"字典类型已存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/dictionaries/types/all":{"get":{"tags":["Dictionaries"],"summary":"批量获取指定类型下的字典条目，支持同时查询多个类型。","operationId":"list_by_types_all","parameters":[{"name":"dict_type__in","in":"query","description":"字典类型，逗号分隔多个（如 ?dict_type__in=channel_type,severity_level）","required":false,"schema":{"type":"string"}},{"name":"enabled_only","in":"query","description":"是否仅返回启用的条目（默认 false）","required":false,"schema":{"type":"boolean"}},{"name":"key__contains","in":"query","description":"dict_key 模糊匹配","required":false,"schema":{"type":"string"}},{"name":"label__contains","in":"query","description":"dict_label 模糊匹配","required":false,"schema":{"type":"string"}},{"name":"limit","in":"query","description":"每页条数（默认 20）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"offset","in":"query","description":"偏移量（默认 0）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"字典条目列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DictionaryItem"}}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/dictionaries/types/{dict_type}":{"put":{"tags":["Dictionaries"],"summary":"更新字典类型。","operationId":"update_dict_type","parameters":[{"name":"dict_type","in":"path","description":"字典类型标识","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateDictionaryTypeRequest"}}},"required":true},"responses":{"200":{"description":"字典类型已更新","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"字典类型不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]},"delete":{"tags":["Dictionaries"],"summary":"删除字典类型。","operationId":"delete_dict_type","parameters":[{"name":"dict_type","in":"path","description":"字典类型标识","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"字典类型已删除","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"字典类型不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/dictionaries/{id}":{"get":{"tags":["Dictionaries"],"summary":"获取单条字典条目详情。","operationId":"get_dictionary","parameters":[{"name":"id","in":"path","description":"字典条目 ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"字典条目详情","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DictionaryItem"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"条目不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]},"put":{"tags":["Dictionaries"],"summary":"更新字典条目。","operationId":"update_dictionary","parameters":[{"name":"id","in":"path","description":"字典条目 ID","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateDictionaryRequest"}}},"required":true},"responses":{"200":{"description":"字典条目已更新","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"条目不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]},"delete":{"tags":["Dictionaries"],"summary":"删除字典条目（系统内置项不可删除）。","operationId":"delete_dictionary","parameters":[{"name":"id","in":"path","description":"字典条目 ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"字典条目已删除","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"403":{"description":"系统内置项不可删除","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"条目不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/health":{"get":{"tags":["Health"],"summary":"获取服务健康状态。\n鉴权：无需 Bearer Token，但需要 ox-app-id 请求头（如果在配置中启用）。","operationId":"health","responses":{"200":{"description":"服务健康状态","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}},"403":{"description":"缺少或无效的 ox-app-id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"app_id_auth":[]}]}},"/v1/metrics":{"get":{"tags":["Metrics"],"summary":"分页查询指标数据点列表（支持按 agent_id__eq、metric_name__eq、时间范围过滤）。\n默认排序：`created_at` 倒序；默认分页：`limit=20&offset=0`。","operationId":"query_all_metrics","parameters":[{"name":"agent_id__eq","in":"query","description":"Agent ID 精确匹配（agent_id__eq，可选）","required":false,"schema":{"type":"string"}},{"name":"metric_name__eq","in":"query","description":"指标名称精确匹配（metric_name__eq，可选）","required":false,"schema":{"type":"string"}},{"name":"timestamp__gte","in":"query","description":"时间下界（timestamp >=，默认为当前时间前 1 小时）","required":false,"schema":{"type":"string","format":"date-time"}},{"name":"timestamp__lte","in":"query","description":"时间上界（timestamp <=，默认为当前时间）","required":false,"schema":{"type":"string","format":"date-time"}},{"name":"limit","in":"query","description":"每页条数（默认 20）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"offset","in":"query","description":"偏移量（默认 0）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"指标数据点分页列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MetricDataPointResponse"}}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/metrics/agents":{"get":{"tags":["Metrics"],"summary":"获取时间范围内所有上报 Agent ID。","operationId":"metric_agents","parameters":[{"name":"timestamp__gte","in":"query","description":"时间下界（默认前 24 小时）","required":false,"schema":{"type":"string","format":"date-time"}},{"name":"timestamp__lte","in":"query","description":"时间上界（默认当前时间）","required":false,"schema":{"type":"string","format":"date-time"}},{"name":"limit","in":"query","description":"每页条数（默认 20）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"offset","in":"query","description":"偏移量（默认 0）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"Agent ID 列表","content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/metrics/names":{"get":{"tags":["Metrics"],"summary":"获取时间范围内所有指标名称。","operationId":"metric_names","parameters":[{"name":"timestamp__gte","in":"query","description":"时间下界（默认前 24 小时）","required":false,"schema":{"type":"string","format":"date-time"}},{"name":"timestamp__lte","in":"query","description":"时间上界（默认当前时间）","required":false,"schema":{"type":"string","format":"date-time"}},{"name":"limit","in":"query","description":"每页条数（默认 20）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"offset","in":"query","description":"偏移量（默认 0）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"指标名称列表","content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/metrics/sources":{"get":{"tags":["Metrics"],"summary":"获取可用于指标查询的数据来源（主动上报 Agent + 云实例）。\n支持分页、来源过滤和模糊搜索；默认分页：`limit=20&offset=0`。","operationId":"metric_sources","parameters":[{"name":"timestamp__gte","in":"query","description":"最近时间下界（按 last_seen 过滤）","required":false,"schema":{"type":"string","format":"date-time"}},{"name":"timestamp__lte","in":"query","description":"最近时间上界（按 last_seen 过滤）","required":false,"schema":{"type":"string","format":"date-time"}},{"name":"source__eq","in":"query","description":"数据来源过滤（agent / cloud，留空表示全部）","required":false,"schema":{"type":"string"}},{"name":"query__contains","in":"query","description":"模糊搜索关键字（匹配 agent_id / 云实例ID/名称/账号/地域等）","required":false,"schema":{"type":"string"}},{"name":"provider__eq","in":"query","description":"云实例 provider 精确匹配（仅 cloud 来源生效）","required":false,"schema":{"type":"string"}},{"name":"region__eq","in":"query","description":"云实例 region 精确匹配（仅 cloud 来源生效）","required":false,"schema":{"type":"string"}},{"name":"status__eq","in":"query","description":"状态过滤：\n- agent: active / inactive\n- cloud: running / stopped / pending / error / unknown","required":false,"schema":{"type":"string"}},{"name":"limit","in":"query","description":"每页条数（默认 20）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"offset","in":"query","description":"偏移量（默认 0）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"指标来源列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MetricSourceItemResponse"}}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/metrics/summary":{"get":{"tags":["Metrics"],"summary":"获取指标聚合统计（min/max/avg/count）。","operationId":"metric_summary","parameters":[{"name":"agent_id","in":"query","description":"Agent ID（必填）","required":true,"schema":{"type":"string"}},{"name":"metric_name","in":"query","description":"指标名称（必填）","required":true,"schema":{"type":"string"}},{"name":"timestamp__gte","in":"query","description":"时间下界（默认前 1 小时）","required":false,"schema":{"type":"string","format":"date-time"}},{"name":"timestamp__lte","in":"query","description":"时间上界（默认当前时间）","required":false,"schema":{"type":"string","format":"date-time"}}],"responses":{"200":{"description":"指标聚合统计"},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/notifications/channels":{"get":{"tags":["Notifications"],"summary":"列出所有通知渠道配置（含收件人）。","operationId":"list_channels","parameters":[{"name":"name__contains","in":"query","description":"渠道名称模糊匹配","required":false,"schema":{"type":"string"}},{"name":"channel_type__eq","in":"query","description":"渠道类型精确匹配（email / webhook / sms / dingtalk / weixin）","required":false,"schema":{"type":"string"}},{"name":"enabled__eq","in":"query","description":"是否启用精确匹配","required":false,"schema":{"type":"boolean"}},{"name":"min_severity__eq","in":"query","description":"最低告警级别精确匹配（info / warning / critical）","required":false,"schema":{"type":"string"}},{"name":"limit","in":"query","description":"每页条数（默认 20）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"offset","in":"query","description":"偏移量（默认 0）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"通知渠道列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChannelOverview"}}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]},"post":{"tags":["Notifications"],"summary":"创建通知渠道（含配置和收件人）。","operationId":"create_channel","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateChannelRequest"}}},"required":true},"responses":{"201":{"description":"通知渠道已创建","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"400":{"description":"请求参数错误","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"409":{"description":"渠道名称已存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/notifications/channels/{id}":{"get":{"tags":["Notifications"],"summary":"获取单个通知渠道配置（含收件人）。","operationId":"get_channel_by_id","parameters":[{"name":"id","in":"path","description":"渠道 ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"通知渠道详情","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelOverview"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"渠道不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]},"put":{"tags":["Notifications"],"summary":"更新通知渠道（含配置和收件人）。","operationId":"update_channel","parameters":[{"name":"id","in":"path","description":"渠道 ID","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateNotificationChannelRequest"}}},"required":true},"responses":{"200":{"description":"通知渠道已更新","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"渠道不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]},"delete":{"tags":["Notifications"],"summary":"删除通知渠道。","operationId":"delete_channel","parameters":[{"name":"id","in":"path","description":"渠道 ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"通知渠道已删除","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"渠道不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/notifications/channels/{id}/test":{"post":{"tags":["Notifications"],"summary":"发送测试通知到指定渠道（按 ID）。","operationId":"test_channel","parameters":[{"name":"id","in":"path","description":"渠道 ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"测试通知已发送"},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"渠道不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/notifications/logs":{"get":{"tags":["Notifications"],"summary":"分页查询通知发送日志。","operationId":"list_notification_logs","parameters":[{"name":"channel_id","in":"query","description":"渠道 ID","required":false,"schema":{"type":"string"}},{"name":"channel_type","in":"query","description":"渠道类型","required":false,"schema":{"type":"string"}},{"name":"status","in":"query","description":"状态（success / failed）","required":false,"schema":{"type":"string"}},{"name":"alert_event_id","in":"query","description":"告警事件 ID","required":false,"schema":{"type":"string"}},{"name":"rule_id","in":"query","description":"规则 ID","required":false,"schema":{"type":"string"}},{"name":"agent_id","in":"query","description":"Agent ID","required":false,"schema":{"type":"string"}},{"name":"start_time","in":"query","description":"开始时间（Unix 秒级时间戳）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"end_time","in":"query","description":"结束时间（Unix 秒级时间戳）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"limit","in":"query","description":"每页条数（默认 20）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"offset","in":"query","description":"偏移量（默认 0）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"通知日志列表","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationLogListResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/notifications/logs/summary":{"get":{"tags":["Notifications"],"summary":"通知发送日志统计摘要。","operationId":"notification_log_summary","parameters":[{"name":"channel_id","in":"query","description":"渠道 ID","required":false,"schema":{"type":"string"}},{"name":"channel_type","in":"query","description":"渠道类型","required":false,"schema":{"type":"string"}},{"name":"start_time","in":"query","description":"开始时间（Unix 秒级时间戳）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"end_time","in":"query","description":"结束时间（Unix 秒级时间戳）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"通知日志统计摘要","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationLogSummaryResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/notifications/logs/{id}":{"get":{"tags":["Notifications"],"summary":"获取单个通知日志详情（按 ID）。","operationId":"get_notification_log","parameters":[{"name":"id","in":"path","description":"通知日志 ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"通知日志详情","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationLogItem"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"通知日志不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/notifications/silence-windows":{"get":{"tags":["Notifications"],"summary":"列出持久化的静默窗口。","operationId":"list_silence_windows","parameters":[{"name":"recurrence__eq","in":"query","description":"重复规则精确匹配（daily / weekly / monthly）","required":false,"schema":{"type":"string"}},{"name":"limit","in":"query","description":"每页条数（默认 20）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"offset","in":"query","description":"偏移量（默认 0）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"静默窗口列表","content":{"application/json":{"schema":{"type":"array","items":{}}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]},"post":{"tags":["Notifications"],"summary":"创建静默窗口。","operationId":"create_silence_window","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSilenceWindowRequest"}}},"required":true},"responses":{"201":{"description":"静默窗口已创建","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/notifications/silence-windows/{id}":{"get":{"tags":["Notifications"],"summary":"获取单个静默窗口详情（按 ID）。","operationId":"get_silence_window","parameters":[{"name":"id","in":"path","description":"静默窗口 ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"静默窗口详情","content":{"application/json":{"schema":{}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"静默窗口不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]},"put":{"tags":["Notifications"],"summary":"更新静默窗口（按 ID）。","operationId":"update_silence_window","parameters":[{"name":"id","in":"path","description":"静默窗口 ID","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSilenceWindowRequest"}}},"required":true},"responses":{"200":{"description":"静默窗口已更新","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"静默窗口不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]},"delete":{"tags":["Notifications"],"summary":"删除静默窗口。","operationId":"delete_silence_window","parameters":[{"name":"id","in":"path","description":"静默窗口 ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"静默窗口已删除","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"静默窗口不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/notifications/test-cert-report":{"post":{"summary":"发送证书告警批量报告测试（读取真实监控域名数据）","operationId":"test_cert_report","responses":{"200":{"description":"测试报告已发送"},"500":{"description":"发送失败"}}}},"/v1/system/certs/backfill-domains":{"post":{"tags":["System"],"summary":"手动回填监控域名（从证书详情表补齐缺失域名）。\n鉴权：需要 Bearer Token。","operationId":"trigger_cert_domains_backfill","parameters":[{"name":"dry_run","in":"query","description":"预览模式：仅返回将补齐的数量，不执行写入","required":false,"schema":{"type":"boolean"}},{"name":"preview_limit","in":"query","description":"预览样本数量上限（仅 dry_run=true 生效，默认 10，最大 100）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"回填结果","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CertDomainsBackfillResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/system/config":{"get":{"tags":["System"],"summary":"获取运行时配置（敏感字段已脱敏）。\n鉴权：需要 Bearer Token。","operationId":"get_system_config","responses":{"200":{"description":"运行时配置","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RuntimeConfig"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/system/configs":{"get":{"tags":["SystemConfig"],"summary":"列出所有系统配置，支持按 config_type、config_key、enabled 过滤。","operationId":"list_system_configs","parameters":[{"name":"limit","in":"query","description":"每页条数（默认 20）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"offset","in":"query","description":"偏移量（默认 0）","required":false,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"config_type","in":"query","description":"按配置类型过滤（如 runtime）","required":false,"schema":{"type":"string"}},{"name":"config_key","in":"query","description":"按配置标识精确匹配（如 language、notification_aggregation_window）","required":false,"schema":{"type":"string"}},{"name":"enabled","in":"query","description":"按启用状态过滤","required":false,"schema":{"type":"boolean"}}],"responses":{"200":{"description":"系统配置列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SystemConfigResponse"}}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]},"post":{"tags":["SystemConfig"],"summary":"创建系统配置。","operationId":"create_system_config","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSystemConfigRequest"}}},"required":true},"responses":{"201":{"description":"系统配置已创建","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"409":{"description":"config_key 已存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/system/configs/{id}":{"get":{"tags":["SystemConfig"],"summary":"获取单个系统配置。","operationId":"get_system_config","parameters":[{"name":"id","in":"path","description":"系统配置 ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"系统配置详情","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SystemConfigResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"系统配置不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]},"put":{"tags":["SystemConfig"],"summary":"更新系统配置。","operationId":"update_system_config","parameters":[{"name":"id","in":"path","description":"系统配置 ID","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSystemConfigRequest"}}},"required":true},"responses":{"200":{"description":"系统配置已更新","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"系统配置不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]},"delete":{"tags":["SystemConfig"],"summary":"删除系统配置（有渠道引用时拒绝删除）。","operationId":"delete_system_config","parameters":[{"name":"id","in":"path","description":"系统配置 ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"系统配置已删除","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdResponse"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"系统配置不存在","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"409":{"description":"有渠道引用此系统配置","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/system/storage":{"get":{"tags":["System"],"summary":"获取存储分区信息。\n鉴权：需要 Bearer Token。","operationId":"get_storage_info","responses":{"200":{"description":"存储分区信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StorageInfo"}}}},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/v1/system/storage/cleanup":{"post":{"tags":["System"],"summary":"手动触发存储清理。\n鉴权：需要 Bearer Token。","operationId":"trigger_cleanup","responses":{"200":{"description":"清理结果"},"401":{"description":"未认证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}}},"components":{"schemas":{"AIAccountResponse":{"type":"object","required":["id","config_key","display_name","enabled","config_json","created_at","updated_at"],"properties":{"id":{"type":"string"},"config_key":{"type":"string"},"provider":{"type":["string","null"]},"display_name":{"type":"string"},"description":{"type":["string","null"]},"enabled":{"type":"boolean"},"config_json":{"description":"敏感字段已脱敏的配置 JSON"},"created_at":{"type":"string"},"updated_at":{"type":"string"}}},"AIReportListItem":{"type":"object","required":["id","report_date","ai_account_id","ai_provider","ai_model","total_agents","risk_level","notified","created_at"],"properties":{"id":{"type":"string"},"report_date":{"type":"string"},"ai_account_id":{"type":"string"},"ai_provider":{"type":"string"},"ai_model":{"type":"string"},"total_agents":{"type":"integer","format":"int32"},"risk_level":{"type":"string"},"notified":{"type":"boolean"},"created_at":{"type":"string"}}},"AIReportRow":{"type":"object","description":"AI 报告数据行（数据库行）","required":["id","report_date","ai_account_id","ai_provider","ai_model","total_agents","risk_level","ai_analysis","html_content","raw_metrics_json","notified","created_at","updated_at"],"properties":{"id":{"type":"string"},"report_date":{"type":"string"},"ai_account_id":{"type":"string"},"ai_provider":{"type":"string"},"ai_model":{"type":"string"},"total_agents":{"type":"integer","format":"int32"},"risk_level":{"type":"string"},"ai_analysis":{"type":"string"},"html_content":{"type":"string"},"raw_metrics_json":{"type":"string"},"notified":{"type":"boolean"},"created_at":{"type":"string","format":"date-time"},"updated_at":{"type":"string","format":"date-time"}}},"AddAgentRequest":{"type":"object","description":"添加 Agent 到白名单请求","required":["agent_id"],"properties":{"agent_id":{"type":"string","description":"Agent ID（必填，需全局唯一）"},"description":{"type":["string","null"],"description":"描述信息（可选）"},"collection_interval_secs":{"type":["integer","null"],"format":"int64","description":"采集间隔（秒），用于判断活跃状态。如果未设置，使用服务器全局配置","minimum":0}}},"AddAgentResponse":{"type":"object","description":"添加 Agent 响应（包含生成的 token）","required":["id","agent_id","token","created_at"],"properties":{"id":{"type":"string","description":"唯一标识"},"agent_id":{"type":"string","description":"Agent 唯一标识"},"token":{"type":"string","description":"生成的认证 token（仅在创建时返回一次）"},"created_at":{"type":"string","format":"date-time","description":"创建时间"}}},"AgentDetail":{"type":"object","description":"Agent 详细信息","required":["id","agent_id","first_seen","last_seen","status","created_at","updated_at","in_whitelist"],"properties":{"id":{"type":"string","description":"数据库 ID"},"agent_id":{"type":"string","description":"Agent 唯一标识"},"first_seen":{"type":"string","format":"date-time","description":"首次上报时间"},"last_seen":{"type":"string","format":"date-time","description":"最后上报时间"},"status":{"type":"string","description":"状态（active / inactive）"},"collection_interval_secs":{"type":["integer","null"],"format":"int64","description":"采集间隔（秒）","minimum":0},"description":{"type":["string","null"],"description":"描述"},"created_at":{"type":"string","format":"date-time","description":"创建时间"},"updated_at":{"type":"string","format":"date-time","description":"更新时间"},"in_whitelist":{"type":"boolean","description":"是否在白名单中"},"whitelist_id":{"type":["string","null"],"description":"白名单条目 ID（如果在白名单中）"}}},"AgentResponse":{"type":"object","description":"Agent 信息","required":["agent_id","status"],"properties":{"id":{"type":["string","null"],"description":"白名单条目 ID（仅白名单 agent 有值）"},"agent_id":{"type":"string","description":"Agent 唯一标识"},"last_seen":{"type":["string","null"],"format":"date-time","description":"最后上报时间"},"status":{"type":"string","description":"状态（active / inactive / unknown）"},"created_at":{"type":["string","null"],"format":"date-time","description":"创建时间（仅白名单 agent 有值）"},"collection_interval_secs":{"type":["integer","null"],"format":"int64","description":"采集间隔（秒），仅白名单 agent 且配置了才有值","minimum":0}}},"AgentWhitelistDetail":{"type":"object","description":"Agent 白名单详情（包含在线状态）","required":["id","agent_id","created_at","updated_at","status"],"properties":{"id":{"type":"string","description":"唯一标识"},"agent_id":{"type":"string","description":"Agent 唯一标识"},"created_at":{"type":"string","format":"date-time","description":"创建时间"},"updated_at":{"type":"string","format":"date-time","description":"更新时间"},"description":{"type":["string","null"],"description":"描述信息"},"token":{"type":["string","null"],"description":"认证 Token（用于 Agent gRPC 配置）"},"collection_interval_secs":{"type":["integer","null"],"format":"int64","description":"采集间隔（秒），用于判断活跃状态。如果未设置，使用服务器全局配置","minimum":0},"last_seen":{"type":["string","null"],"format":"date-time","description":"最后上报时间"},"status":{"type":"string","description":"在线状态（active / inactive / unknown）"}}},"AlertEventResponse":{"type":"object","description":"告警事件","required":["id","rule_id","agent_id","metric_name","severity","message","value","threshold","timestamp","status"],"properties":{"id":{"type":"string","description":"事件唯一标识"},"rule_id":{"type":"string","description":"触发规则 ID"},"agent_id":{"type":"string","description":"Agent 唯一标识"},"metric_name":{"type":"string","description":"指标名称"},"severity":{"type":"string","description":"告警级别"},"message":{"type":"string","description":"告警消息"},"value":{"type":"number","format":"double","description":"当前指标值"},"threshold":{"type":"number","format":"double","description":"告警阈值"},"timestamp":{"type":"string","format":"date-time","description":"触发时间"},"predicted_breach":{"type":["string","null"],"format":"date-time","description":"预测突破时间（趋势预测规则）"},"status":{"type":"integer","format":"int32","description":"状态：1=未处理, 2=已确认, 3=已处理","minimum":0}}},"AlertRuleDetailResponse":{"type":"object","description":"告警规则详情","required":["id","name","rule_type","metric","agent_pattern","severity","enabled","config_json","silence_secs","source","created_at","updated_at"],"properties":{"id":{"type":"string"},"name":{"type":"string"},"rule_type":{"type":"string"},"metric":{"type":"string"},"agent_pattern":{"type":"string"},"severity":{"type":"string"},"enabled":{"type":"boolean"},"config_json":{"type":"string"},"silence_secs":{"type":"integer","format":"int64","minimum":0},"source":{"type":"string"},"created_at":{"type":"string","format":"date-time"},"updated_at":{"type":"string","format":"date-time"}}},"AlertRuleResponse":{"type":"object","description":"告警规则信息","required":["id","name","rule_type","metric","agent_pattern","severity","enabled"],"properties":{"id":{"type":"string","description":"规则唯一标识"},"name":{"type":"string","description":"规则名称"},"rule_type":{"type":"string","description":"规则类型（threshold / rate_of_change / trend_prediction / cert_expiration）"},"metric":{"type":"string","description":"监控指标名称"},"agent_pattern":{"type":"string","description":"Agent 匹配模式（支持 glob）"},"severity":{"type":"string","description":"告警级别"},"enabled":{"type":"boolean","description":"是否启用"}}},"ApiError":{"type":"object","description":"API 错误响应","required":["err_code","err_msg","trace_id"],"properties":{"err_code":{"type":"integer","format":"int32","description":"错误码"},"err_msg":{"type":"string","description":"错误信息"},"trace_id":{"type":"string","description":"链路追踪 ID（默认空字符串）"}}},"BatchCreateCloudAccountsRequest":{"type":"object","description":"批量导入云账户请求\n\n文本格式每行一条，字段用 `:` 分隔，区域用 `,` 分隔：\n`账号名:SecretId:SecretKey:region1,region2`\n\n多条记录用 `|` 分隔，例如：\n`主账号:AKID123:secret:ap-shanghai,ap-guangzhou|子账号:AKID456:secret2:ap-beijing`","required":["provider","text"],"properties":{"provider":{"type":"string","description":"供应商（tencent 或 alibaba）"},"text":{"type":"string","description":"批量文本，格式：账号名:SecretId:SecretKey:region1,region2|..."},"collection_interval_secs":{"type":["integer","null"],"format":"int64","description":"采集间隔（秒，默认 300）"}}},"BatchCreateCloudAccountsResponse":{"type":"object","description":"批量导入云账户响应","required":["created","skipped","errors"],"properties":{"created":{"type":"integer","description":"成功创建数量","minimum":0},"skipped":{"type":"integer","description":"跳过（config_key 已存在）数量","minimum":0},"errors":{"type":"array","items":{"type":"string"},"description":"错误列表（格式: \"行N: 原因\"）"}}},"BatchCreateDomainsRequest":{"type":"object","description":"批量创建域名请求","required":["domains"],"properties":{"domains":{"type":"array","items":{"$ref":"#/components/schemas/CreateDomainRequest"},"description":"待新增监控域名列表（必填）"}}},"CertCheckResult":{"type":"object","description":"证书检查结果","required":["id","domain_id","domain","is_valid","chain_valid","checked_at","created_at","updated_at"],"properties":{"id":{"type":"string","description":"结果唯一标识"},"domain_id":{"type":"string","description":"关联域名 ID"},"domain":{"type":"string","description":"域名地址"},"is_valid":{"type":"boolean","description":"证书是否有效"},"chain_valid":{"type":"boolean","description":"证书链是否有效"},"not_before":{"type":["string","null"],"format":"date-time","description":"证书生效时间"},"not_after":{"type":["string","null"],"format":"date-time","description":"证书过期时间"},"days_until_expiry":{"type":["integer","null"],"format":"int64","description":"距离过期天数"},"issuer":{"type":["string","null"],"description":"证书颁发者"},"subject":{"type":["string","null"],"description":"证书主体"},"san_list":{"type":["array","null"],"items":{"type":"string"},"description":"主体备用名称列表（SAN）"},"resolved_ips":{"type":["array","null"],"items":{"type":"string"},"description":"域名解析 IP 地址列表"},"error":{"type":["string","null"],"description":"错误信息"},"checked_at":{"type":"string","format":"date-time","description":"检查时间"},"created_at":{"type":"string","format":"date-time","description":"创建时间"},"updated_at":{"type":"string","format":"date-time","description":"更新时间"}}},"CertDomain":{"type":"object","description":"证书监控域名","required":["id","domain","port","enabled","created_at","updated_at"],"properties":{"id":{"type":"string","description":"域名唯一标识"},"domain":{"type":"string","description":"监控域名（必填，如 example.com）"},"port":{"type":"integer","format":"int32","description":"端口号"},"enabled":{"type":"boolean","description":"是否启用监控"},"check_interval_secs":{"type":["integer","null"],"format":"int64","description":"检查间隔秒数（可选）","minimum":0},"note":{"type":["string","null"],"description":"备注（可选）"},"last_checked_at":{"type":["string","null"],"format":"date-time","description":"最后检查时间"},"created_at":{"type":"string","format":"date-time","description":"创建时间"},"updated_at":{"type":"string","format":"date-time","description":"更新时间"}}},"CertDomainsBackfillResponse":{"type":"object","required":["inserted_domains","dry_run","domains_preview"],"properties":{"inserted_domains":{"type":"integer","format":"int64","description":"本次新增回填到监控域名表的域名数量","minimum":0},"dry_run":{"type":"boolean","description":"是否为预览模式（true 表示未实际写入）"},"domains_preview":{"type":"array","items":{"type":"string"},"description":"样本域名列表（dry_run=true 时为“待回填样本”；执行模式时为“本次回填样本”）"}}},"CertSummary":{"type":"object","required":["total_domains","valid","invalid","expiring_soon"],"properties":{"total_domains":{"type":"integer","format":"int64","minimum":0},"valid":{"type":"integer","format":"int64","minimum":0},"invalid":{"type":"integer","format":"int64","minimum":0},"expiring_soon":{"type":"integer","format":"int64","minimum":0}}},"CertificateChainInfo":{"type":"object","description":"证书链信息","required":["id","domain","chain_valid","last_checked"],"properties":{"id":{"type":"string","description":"证书唯一标识"},"domain":{"type":"string","description":"域名"},"chain_valid":{"type":"boolean","description":"证书链是否有效"},"chain_error":{"type":["string","null"],"description":"证书链错误信息"},"last_checked":{"type":"string","format":"date-time","description":"最后检查时间"}}},"CertificateDetails":{"type":"object","description":"证书详细信息","required":["id","domain","not_before","not_after","ip_addresses","subject_alt_names","chain_valid","last_checked","created_at","updated_at"],"properties":{"id":{"type":"string","description":"唯一标识"},"domain":{"type":"string","description":"域名"},"not_before":{"type":"string","format":"date-time","description":"证书生效时间"},"not_after":{"type":"string","format":"date-time","description":"证书过期时间"},"ip_addresses":{"type":"array","items":{"type":"string"},"description":"IP 地址列表"},"issuer_cn":{"type":["string","null"],"description":"颁发者通用名称"},"issuer_o":{"type":["string","null"],"description":"颁发者组织"},"issuer_ou":{"type":["string","null"],"description":"颁发者组织单位"},"issuer_c":{"type":["string","null"],"description":"颁发者国家"},"subject_alt_names":{"type":"array","items":{"type":"string"},"description":"主体备用名称列表"},"chain_valid":{"type":"boolean","description":"证书链是否有效"},"chain_error":{"type":["string","null"],"description":"证书链错误信息"},"last_checked":{"type":"string","format":"date-time","description":"最后检查时间"},"created_at":{"type":"string","format":"date-time","description":"创建时间"},"updated_at":{"type":"string","format":"date-time","description":"更新时间"},"serial_number":{"type":["string","null"],"description":"证书序列号（十六进制）"},"fingerprint_sha256":{"type":["string","null"],"description":"证书 SHA-256 指纹"},"version":{"type":["integer","null"],"format":"int32","description":"证书版本（1/2/3）"},"signature_algorithm":{"type":["string","null"],"description":"签名算法（如 SHA256withRSA）"},"public_key_algorithm":{"type":["string","null"],"description":"公钥算法（RSA, ECDSA, Ed25519）"},"public_key_bits":{"type":["integer","null"],"format":"int32","description":"公钥长度（如 2048, 4096, 256）"},"subject_cn":{"type":["string","null"],"description":"主体通用名称"},"subject_o":{"type":["string","null"],"description":"主体组织"},"key_usage":{"type":["array","null"],"items":{"type":"string"},"description":"密钥用途（JSON 数组）"},"extended_key_usage":{"type":["array","null"],"items":{"type":"string"},"description":"扩展密钥用途（JSON 数组）"},"is_ca":{"type":["boolean","null"],"description":"是否 CA 证书"},"is_wildcard":{"type":["boolean","null"],"description":"是否通配符证书"},"ocsp_urls":{"type":["array","null"],"items":{"type":"string"},"description":"OCSP 响应器地址（JSON 数组）"},"crl_urls":{"type":["array","null"],"items":{"type":"string"},"description":"CRL 分发点（JSON 数组）"},"ca_issuer_urls":{"type":["array","null"],"items":{"type":"string"},"description":"CA 颁发者 URL（JSON 数组）"},"sct_count":{"type":["integer","null"],"format":"int32","description":"Certificate Transparency SCT 数量"},"tls_version":{"type":["string","null"],"description":"协商的 TLS 版本"},"cipher_suite":{"type":["string","null"],"description":"协商的加密套件"},"chain_depth":{"type":["integer","null"],"format":"int32","description":"证书链深度"}}},"ChangePasswordRequest":{"type":"object","description":"修改密码请求","required":["encrypted_current_password","encrypted_new_password"],"properties":{"encrypted_current_password":{"type":"string","description":"RSA-OAEP 加密后的当前密码（Base64 编码，必填）"},"encrypted_new_password":{"type":"string","description":"RSA-OAEP 加密后的新密码（Base64 编码，必填）"}}},"ChannelOverview":{"type":"object","description":"通知渠道完整信息（含配置和收件人）","required":["id","name","channel_type","min_severity","enabled","config_json","recipients","created_at","updated_at"],"properties":{"id":{"type":"string"},"name":{"type":"string"},"channel_type":{"type":"string"},"description":{"type":["string","null"]},"min_severity":{"type":"string"},"enabled":{"type":"boolean"},"config_json":{"type":"string"},"recipient_type":{"type":["string","null"]},"recipients":{"type":"array","items":{"type":"string"}},"created_at":{"type":"string"},"updated_at":{"type":"string"}}},"CloudAccountResponse":{"type":"object","description":"云账户响应","required":["id","config_key","provider","display_name","account_name","secret_id","secret_key","regions","collection_interval_secs","enabled","created_at","updated_at"],"properties":{"id":{"type":"string"},"config_key":{"type":"string"},"provider":{"type":"string"},"display_name":{"type":"string"},"description":{"type":["string","null"]},"account_name":{"type":"string","description":"云账号名称（如\"主账号\"）"},"secret_id":{"type":"string"},"secret_key":{"type":"string"},"regions":{"type":"array","items":{"type":"string"},"description":"地域列表（如 [\"ap-shanghai\", \"ap-guangzhou\"]）"},"collection_interval_secs":{"type":"integer","format":"int64"},"enabled":{"type":"boolean"},"created_at":{"type":"string"},"updated_at":{"type":"string"}}},"CloudInstanceDetailResponse":{"type":"object","description":"云实例详情响应（包含实时指标）","required":["id","instance_id","provider","account_config_key","region","normalized_status","security_group_ids","ipv6_addresses","tags","last_seen_at","created_at","updated_at"],"properties":{"id":{"type":"string","description":"数据库主键"},"instance_id":{"type":"string","description":"云实例 ID（如 ins-abc123）"},"instance_name":{"type":["string","null"],"description":"实例名称"},"provider":{"type":"string","description":"云供应商（tencent / alibaba）"},"account_config_key":{"type":"string","description":"关联的云账户 config_key"},"region":{"type":"string","description":"地域"},"public_ip":{"type":["string","null"],"description":"公网 IP"},"private_ip":{"type":["string","null"],"description":"内网 IP"},"os":{"type":["string","null"],"description":"操作系统"},"normalized_status":{"type":"string","description":"归一化状态（running/pending/stopped/error/unknown）"},"status":{"type":["string","null"],"description":"实例状态（Running / Stopped 等）"},"instance_type":{"type":["string","null"],"description":"实例规格（如 S5.LARGE8）"},"cpu_cores":{"type":["integer","null"],"format":"int32","description":"CPU 核心数"},"memory_gb":{"type":["number","null"],"format":"double","description":"内存（GB）"},"disk_gb":{"type":["number","null"],"format":"double","description":"磁盘总容量（GB）"},"created_time":{"type":["integer","null"],"format":"int64","description":"实例创建时间(Unix timestamp)"},"expired_time":{"type":["integer","null"],"format":"int64","description":"实例过期时间(Unix timestamp,仅预付费实例)"},"charge_type":{"type":["string","null"],"description":"计费类型(PREPAID/POSTPAID_BY_HOUR/PrePaid/PostPaid)"},"vpc_id":{"type":["string","null"],"description":"VPC ID"},"subnet_id":{"type":["string","null"],"description":"子网/交换机ID"},"security_group_ids":{"type":"array","items":{"type":"string"},"description":"安全组ID列表"},"zone":{"type":["string","null"],"description":"可用区"},"internet_max_bandwidth":{"type":["integer","null"],"format":"int32","description":"公网带宽上限(Mbps)"},"ipv6_addresses":{"type":"array","items":{"type":"string"},"description":"IPv6地址列表"},"eip_allocation_id":{"type":["string","null"],"description":"弹性公网IP分配ID(阿里云)"},"internet_charge_type":{"type":["string","null"],"description":"网络计费类型"},"image_id":{"type":["string","null"],"description":"镜像ID"},"hostname":{"type":["string","null"],"description":"主机名"},"description":{"type":["string","null"],"description":"实例描述"},"gpu":{"type":["integer","null"],"format":"int32","description":"GPU核数"},"io_optimized":{"type":["string","null"],"description":"IO优化状态"},"latest_operation":{"type":["string","null"],"description":"最近操作"},"latest_operation_state":{"type":["string","null"],"description":"最近操作状态"},"tags":{"type":"object","description":"标签","additionalProperties":{"type":"string"},"propertyNames":{"type":"string"}},"project_id":{"type":["string","null"],"description":"项目ID"},"resource_group_id":{"type":["string","null"],"description":"资源组ID"},"auto_renew_flag":{"type":["string","null"],"description":"自动续费标识"},"cpu_usage":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/MetricLatestValue","description":"CPU 使用率（%）"}]},"memory_usage":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/MetricLatestValue","description":"内存使用率（%）"}]},"disk_usage":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/MetricLatestValue","description":"磁盘使用率（%）"}]},"network_in_bytes":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/MetricLatestValue","description":"入站网络流量（bytes/s）"}]},"network_out_bytes":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/MetricLatestValue","description":"出站网络流量（bytes/s）"}]},"disk_iops_read":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/MetricLatestValue","description":"磁盘读 IOPS"}]},"disk_iops_write":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/MetricLatestValue","description":"磁盘写 IOPS"}]},"connections":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/MetricLatestValue","description":"TCP 连接数"}]},"last_seen_at":{"type":"string","description":"最近一次被调度器发现的时间"},"last_collected_at":{"type":["string","null"],"description":"最近一次指标采集时间（来自指标数据）"},"created_at":{"type":"string","description":"实例首次入库时间"},"updated_at":{"type":"string","description":"实例信息最后更新时间"}}},"CloudInstanceResponse":{"type":"object","description":"云实例响应","required":["id","instance_id","provider","account_config_key","region","normalized_status","last_seen_at","created_at","updated_at","security_group_ids","ipv6_addresses","tags"],"properties":{"id":{"type":"string","description":"系统雪花ID(主键)","example":"1234567890123456789"},"instance_id":{"type":"string","description":"云提供商的实例ID","example":"ins-ic9p379n"},"instance_name":{"type":["string","null"]},"provider":{"type":"string"},"account_config_key":{"type":"string"},"region":{"type":"string"},"public_ip":{"type":["string","null"]},"private_ip":{"type":["string","null"]},"os":{"type":["string","null"]},"normalized_status":{"type":"string","description":"原始云厂商状态归一化后的状态（running/pending/stopped/error/unknown）"},"status":{"type":["string","null"]},"last_seen_at":{"type":"string"},"created_at":{"type":"string"},"updated_at":{"type":"string"},"instance_type":{"type":["string","null"]},"cpu_cores":{"type":["integer","null"],"format":"int32"},"memory_gb":{"type":["number","null"],"format":"double"},"disk_gb":{"type":["number","null"],"format":"double"},"created_time":{"type":["integer","null"],"format":"int64","description":"实例创建时间(Unix timestamp)"},"expired_time":{"type":["integer","null"],"format":"int64","description":"实例过期时间(Unix timestamp,仅预付费实例)"},"charge_type":{"type":["string","null"],"description":"计费类型(PREPAID/POSTPAID_BY_HOUR/PrePaid/PostPaid)"},"vpc_id":{"type":["string","null"],"description":"VPC ID"},"subnet_id":{"type":["string","null"],"description":"子网/交换机ID"},"security_group_ids":{"type":"array","items":{"type":"string"},"description":"安全组ID列表"},"zone":{"type":["string","null"],"description":"可用区"},"internet_max_bandwidth":{"type":["integer","null"],"format":"int32","description":"公网带宽上限(Mbps)"},"ipv6_addresses":{"type":"array","items":{"type":"string"},"description":"IPv6地址列表"},"eip_allocation_id":{"type":["string","null"],"description":"弹性公网IP分配ID(阿里云)"},"internet_charge_type":{"type":["string","null"],"description":"网络计费类型"},"image_id":{"type":["string","null"],"description":"镜像ID"},"hostname":{"type":["string","null"],"description":"主机名"},"description":{"type":["string","null"],"description":"实例描述"},"gpu":{"type":["integer","null"],"format":"int32","description":"GPU核数"},"io_optimized":{"type":["string","null"],"description":"IO优化状态"},"latest_operation":{"type":["string","null"],"description":"最近操作"},"latest_operation_state":{"type":["string","null"],"description":"最近操作状态"},"tags":{"type":"object","description":"标签","additionalProperties":{"type":"string"},"propertyNames":{"type":"string"}},"project_id":{"type":["string","null"],"description":"项目ID"},"resource_group_id":{"type":["string","null"],"description":"资源组ID"},"auto_renew_flag":{"type":["string","null"],"description":"自动续费标识"}}},"CloudSummary":{"type":"object","required":["total_accounts","enabled_accounts","total_instances","running_instances","stopped_instances","pending_instances","error_instances","unknown_instances"],"properties":{"total_accounts":{"type":"integer","format":"int64","example":3,"minimum":0},"enabled_accounts":{"type":"integer","format":"int64","example":2,"minimum":0},"total_instances":{"type":"integer","format":"int64","example":128,"minimum":0},"running_instances":{"type":"integer","format":"int64","example":97,"minimum":0},"stopped_instances":{"type":"integer","format":"int64","example":21,"minimum":0},"pending_instances":{"type":"integer","format":"int64","example":6,"minimum":0},"error_instances":{"type":"integer","format":"int64","example":1,"minimum":0},"unknown_instances":{"type":"integer","format":"int64","example":3,"minimum":0}}},"CreateAIAccountRequest":{"type":"object","required":["config_key","provider","display_name","enabled","config"],"properties":{"config_key":{"type":"string"},"provider":{"type":"string"},"display_name":{"type":"string"},"description":{"type":["string","null"]},"enabled":{"type":"boolean"},"config":{}}},"CreateAlertRuleRequest":{"type":"object","required":["name","rule_type","metric"],"properties":{"name":{"type":"string"},"rule_type":{"type":"string"},"metric":{"type":"string"},"agent_pattern":{"type":"string"},"severity":{"type":"string"},"enabled":{"type":"boolean"},"config_json":{"type":"string"},"silence_secs":{"type":"integer","format":"int64","minimum":0}}},"CreateChannelRequest":{"type":"object","required":["name","channel_type"],"properties":{"name":{"type":"string"},"channel_type":{"type":"string"},"description":{"type":["string","null"]},"min_severity":{"type":"string"},"config_json":{"type":"string"},"recipients":{"type":"array","items":{"type":"string"}}}},"CreateCloudAccountRequest":{"type":"object","description":"创建云账户请求","required":["config_key","provider","display_name","account_name","secret_id","secret_key","regions"],"properties":{"config_key":{"type":"string","description":"配置标识（唯一，如 cloud_tencent_prod）"},"provider":{"type":"string","description":"云供应商（tencent 或 alibaba）"},"display_name":{"type":"string","description":"显示名称"},"description":{"type":["string","null"],"description":"描述"},"account_name":{"type":"string","description":"云账号名称（如\"主账号\"、\"子账号1\"）"},"secret_id":{"type":"string","description":"API 密钥 ID（腾讯云 SecretId, 阿里云 AccessKeyId）"},"secret_key":{"type":"string","description":"API 密钥 Secret（腾讯云 SecretKey, 阿里云 AccessKeySecret）"},"regions":{"type":"array","items":{"type":"string"},"description":"地域列表（如 [\"ap-shanghai\", \"ap-guangzhou\"]）"},"collection_interval_secs":{"type":["integer","null"],"format":"int64","description":"采集间隔（秒，默认 300）"}}},"CreateDictionaryRequest":{"type":"object","description":"创建字典条目请求","required":["dict_type","dict_key","dict_label"],"properties":{"dict_type":{"type":"string","description":"字典类型（必填）"},"dict_key":{"type":"string","description":"字典键（必填，同一 dict_type 下唯一）"},"dict_label":{"type":"string","description":"显示标签（必填）"},"dict_value":{"type":["string","null"],"description":"字典值（可选）"},"sort_order":{"type":["integer","null"],"format":"int32","description":"排序序号（可选，默认 0）"},"enabled":{"type":["boolean","null"],"description":"是否启用（可选，默认 true）"},"description":{"type":["string","null"],"description":"描述信息（可选）"},"extra_json":{"type":["string","null"],"description":"扩展 JSON（可选）"}}},"CreateDictionaryTypeRequest":{"type":"object","description":"创建字典类型请求","required":["dict_type","dict_type_label"],"properties":{"dict_type":{"type":"string","description":"字典类型标识（必填，如 channel_type）"},"dict_type_label":{"type":"string","description":"显示标签（必填，如 \"通知渠道类型\"）"},"sort_order":{"type":["integer","null"],"format":"int32","description":"排序序号（可选，默认 0）"},"description":{"type":["string","null"],"description":"描述信息（可选）"}}},"CreateDomainRequest":{"type":"object","description":"创建域名请求","required":["domain"],"properties":{"domain":{"type":"string","description":"监控域名（必填，如 example.com）"},"port":{"type":["integer","null"],"format":"int32","description":"监控端口（可选，默认 443）"},"check_interval_secs":{"type":["integer","null"],"format":"int64","description":"检查间隔秒数（可选）","minimum":0},"note":{"type":["string","null"],"description":"备注（可选）"}}},"CreateSilenceWindowRequest":{"type":"object","required":["start_time","end_time"],"properties":{"start_time":{"type":"string"},"end_time":{"type":"string"},"recurrence":{"type":["string","null"]}}},"CreateSystemConfigRequest":{"type":"object","description":"创建系统配置请求","required":["config_key","config_type","display_name","config_json"],"properties":{"config_key":{"type":"string","description":"配置标识（唯一，如 email、sms_aliyun）"},"config_type":{"type":"string","description":"配置类型（email 或 sms）"},"provider":{"type":["string","null"],"description":"短信子供应商（sms 类型时填写：aliyun、tencent、generic）"},"display_name":{"type":"string","description":"显示名称"},"description":{"type":["string","null"],"description":"描述"},"config_json":{"type":"string","description":"配置 JSON（SMTP 或短信供应商配置）"}}},"DashboardOverview":{"type":"object","description":"仪表盘概览数据","required":["active_agents","total_agents","alerts_24h","alerts_by_severity","cert_summary","cloud_summary","partition_count","storage_total_bytes","uptime_secs"],"properties":{"active_agents":{"type":"integer","description":"活跃 Agent 数量","minimum":0},"total_agents":{"type":"integer","description":"已注册 Agent 总数","minimum":0},"alerts_24h":{"type":"integer","format":"int64","description":"24 小时内告警总数","minimum":0},"alerts_by_severity":{"type":"object","description":"告警按级别统计","additionalProperties":{"type":"integer","format":"int64","minimum":0},"propertyNames":{"type":"string"}},"cert_summary":{"$ref":"#/components/schemas/CertSummary","description":"证书健康摘要"},"cloud_summary":{"$ref":"#/components/schemas/CloudSummary","description":"云资源摘要"},"partition_count":{"type":"integer","description":"存储分区数量","minimum":0},"storage_total_bytes":{"type":"integer","format":"int64","description":"存储总大小（字节）","minimum":0},"uptime_secs":{"type":"integer","format":"int64","description":"服务运行时长（秒）"}}},"DictionaryItem":{"type":"object","description":"系统字典条目","required":["id","dict_type","dict_key","dict_label","sort_order","enabled","is_system","created_at","updated_at"],"properties":{"id":{"type":"string","description":"唯一标识"},"dict_type":{"type":"string","description":"字典类型（如 channel_type, severity, rule_type 等）"},"dict_key":{"type":"string","description":"字典键（英文标识，同一 dict_type 下唯一）"},"dict_label":{"type":"string","description":"显示标签（中文/英文）"},"dict_value":{"type":["string","null"],"description":"字典值（可选，用于存放额外值）"},"sort_order":{"type":"integer","format":"int32","description":"排序序号"},"enabled":{"type":"boolean","description":"是否启用"},"is_system":{"type":"boolean","description":"是否系统内置（系统内置项不可删除）"},"description":{"type":["string","null"],"description":"描述信息"},"extra_json":{"type":["string","null"],"description":"扩展 JSON（可选，用于存放额外配置）"},"created_at":{"type":"string","format":"date-time","description":"创建时间"},"updated_at":{"type":"string","format":"date-time","description":"更新时间"}}},"DictionaryTypeSummary":{"type":"object","description":"字典类型摘要","required":["dict_type","dict_type_label","count"],"properties":{"dict_type":{"type":"string","description":"字典类型"},"dict_type_label":{"type":"string","description":"字典类型显示标签（中文名称）"},"count":{"type":"integer","format":"int64","description":"该类型下的条目数量","minimum":0}}},"EnableRequest":{"type":"object","required":["enabled"],"properties":{"enabled":{"type":"boolean"}}},"HealthResponse":{"type":"object","description":"健康检查响应","required":["version","uptime_secs","agent_count","storage_status"],"properties":{"version":{"type":"string","description":"服务版本号"},"uptime_secs":{"type":"integer","format":"int64","description":"运行时长（秒）"},"agent_count":{"type":"integer","description":"已注册 Agent 数量","minimum":0},"storage_status":{"type":"string","description":"存储状态"}}},"IdResponse":{"type":"object","description":"变更操作响应（创建/更新/删除）","required":["id"],"properties":{"id":{"type":"string","description":"资源 ID"}}},"LatestMetric":{"type":"object","description":"最新指标数据","required":["metric_name","value","labels","timestamp"],"properties":{"metric_name":{"type":"string","description":"指标名称"},"value":{"type":"number","format":"double","description":"指标值"},"labels":{"type":"object","description":"标签 (如 mount=/、interface=eth0、core=0)","additionalProperties":{"type":"string"},"propertyNames":{"type":"string"}},"timestamp":{"type":"string","format":"date-time","description":"采集时间"}}},"LoginRequest":{"type":"object","description":"登录请求","required":["username","encrypted_password"],"properties":{"username":{"type":"string","description":"登录用户名（必填）"},"encrypted_password":{"type":"string","description":"RSA-OAEP 加密后的密码（Base64 编码，必填）"}}},"LoginResponse":{"type":"object","description":"登录响应","required":["access_token","expires_in"],"properties":{"access_token":{"type":"string","description":"JWT Access Token"},"expires_in":{"type":"integer","format":"int64","description":"Token 有效期（秒）","minimum":0}}},"MetricDataPointResponse":{"type":"object","description":"指标数据点（完整）","required":["id","timestamp","agent_id","metric_name","value","labels","created_at"],"properties":{"id":{"type":"string","description":"指标唯一标识"},"timestamp":{"type":"string","format":"date-time","description":"采集时间"},"agent_id":{"type":"string","description":"Agent 唯一标识"},"metric_name":{"type":"string","description":"指标名称"},"value":{"type":"number","format":"double","description":"指标值"},"labels":{"type":"object","description":"指标标签（如 mount=/、interface=eth0、core=0）","additionalProperties":{"type":"string"},"propertyNames":{"type":"string"}},"created_at":{"type":"string","format":"date-time","description":"创建时间"}}},"MetricLatestValue":{"type":"object","description":"单条指标最新值","required":["metric_name","value","collected_at"],"properties":{"metric_name":{"type":"string","description":"指标名称"},"value":{"type":"number","format":"double","description":"最新值"},"collected_at":{"type":"string","description":"采集时间"}}},"MetricSourceItemResponse":{"type":"object","required":["id","source","display_name","status"],"properties":{"id":{"type":"string","description":"用于指标查询的主体 ID（agent: 原始 agent_id；cloud: cloud:{provider}:{instance_id}）"},"source":{"type":"string","description":"来源类型（agent / cloud）"},"display_name":{"type":"string","description":"展示名称"},"status":{"type":"string","description":"状态（agent: active/inactive；cloud: running/stopped/pending/error/unknown）"},"provider":{"type":["string","null"],"description":"provider（仅 cloud 有值）"},"region":{"type":["string","null"],"description":"region（仅 cloud 有值）"},"instance_id":{"type":["string","null"],"description":"cloud 原始实例 ID（仅 cloud 有值）"},"account_config_key":{"type":["string","null"],"description":"cloud 账号配置键（仅 cloud 有值）"},"last_seen":{"type":["string","null"],"format":"date-time","description":"最近时间（agent: last_seen；cloud: last_seen_at）"}}},"NotificationLogItem":{"type":"object","required":["id","alert_event_id","rule_id","rule_name","agent_id","channel_id","channel_name","channel_type","status","duration_ms","recipient_count","severity","created_at","retry_count"],"properties":{"id":{"type":"string"},"alert_event_id":{"type":"string"},"rule_id":{"type":"string"},"rule_name":{"type":"string"},"agent_id":{"type":"string"},"channel_id":{"type":"string"},"channel_name":{"type":"string"},"channel_type":{"type":"string"},"status":{"type":"string"},"error_message":{"type":["string","null"]},"duration_ms":{"type":"integer","format":"int64"},"recipient_count":{"type":"integer","format":"int32"},"severity":{"type":"string"},"created_at":{"type":"string"},"http_status_code":{"type":["integer","null"],"format":"int32"},"response_body":{"type":["string","null"]},"request_body":{"type":["string","null"]},"retry_count":{"type":"integer","format":"int32"},"recipient_details":{"type":["string","null"]},"api_message_id":{"type":["string","null"]},"api_error_code":{"type":["string","null"]}}},"NotificationLogListResponse":{"type":"object","required":["items","total"],"properties":{"items":{"type":"array","items":{"$ref":"#/components/schemas/NotificationLogItem"}},"total":{"type":"integer","format":"int64","minimum":0}}},"NotificationLogSummaryResponse":{"type":"object","required":["total","success","failed"],"properties":{"total":{"type":"integer","format":"int64","minimum":0},"success":{"type":"integer","format":"int64","minimum":0},"failed":{"type":"integer","format":"int64","minimum":0}}},"PartitionDetail":{"type":"object","required":["date","size_bytes"],"properties":{"date":{"type":"string"},"size_bytes":{"type":"integer","format":"int64","minimum":0}}},"PublicKeyResponse":{"type":"object","description":"公钥响应","required":["public_key","algorithm"],"properties":{"public_key":{"type":"string","description":"RSA 公钥（PEM 格式）"},"algorithm":{"type":"string","description":"加密算法标识"}}},"RegenerateTokenResponse":{"type":"object","description":"重新生成 Token 响应","required":["agent_id","token"],"properties":{"agent_id":{"type":"string","description":"Agent 唯一标识"},"token":{"type":"string","description":"新生成的认证 token"}}},"RuntimeConfig":{"type":"object","description":"脱敏的运行时配置","required":["grpc_port","http_port","data_dir","retention_days","require_agent_auth","cert_check_enabled","cert_check_default_interval_secs","cert_check_tick_secs","cert_check_max_concurrent","notification_aggregation_window_secs","alert_rules_count","notification_channels_count","language"],"properties":{"grpc_port":{"type":"integer","format":"int32","minimum":0},"http_port":{"type":"integer","format":"int32","minimum":0},"data_dir":{"type":"string"},"retention_days":{"type":"integer","format":"int32","minimum":0},"require_agent_auth":{"type":"boolean"},"cert_check_enabled":{"type":"boolean"},"cert_check_default_interval_secs":{"type":"integer","format":"int64","minimum":0},"cert_check_tick_secs":{"type":"integer","format":"int64","minimum":0},"cert_check_max_concurrent":{"type":"integer","minimum":0},"notification_aggregation_window_secs":{"type":"integer","format":"int64","minimum":0},"alert_rules_count":{"type":"integer","minimum":0},"notification_channels_count":{"type":"integer","minimum":0},"language":{"type":"string","description":"系统当前语言设置"}}},"StorageInfo":{"type":"object","description":"存储分区信息","required":["partitions","total_partitions","total_size_bytes"],"properties":{"partitions":{"type":"array","items":{"$ref":"#/components/schemas/PartitionDetail"},"description":"分区列表"},"total_partitions":{"type":"integer","description":"分区总数","minimum":0},"total_size_bytes":{"type":"integer","format":"int64","description":"总存储大小（字节）","minimum":0}}},"SystemConfigResponse":{"type":"object","description":"系统配置响应","required":["id","config_key","config_type","display_name","config_json","enabled","created_at","updated_at"],"properties":{"id":{"type":"string"},"config_key":{"type":"string"},"config_type":{"type":"string"},"provider":{"type":["string","null"]},"display_name":{"type":"string"},"description":{"type":["string","null"]},"config_json":{},"enabled":{"type":"boolean"},"created_at":{"type":"string"},"updated_at":{"type":"string"}}},"TestConnectionResponse":{"type":"object","description":"测试连接响应","required":["success","message"],"properties":{"success":{"type":"boolean"},"message":{"type":"string"},"instance_count":{"type":["integer","null"],"minimum":0}}},"TriggerCollectionResponse":{"type":"object","description":"触发采集响应","required":["success","message"],"properties":{"success":{"type":"boolean"},"message":{"type":"string"},"collected_count":{"type":["integer","null"],"minimum":0}}},"UpdateAIAccountRequest":{"type":"object","properties":{"display_name":{"type":["string","null"]},"description":{"type":["string","null"]},"enabled":{"type":["boolean","null"]},"config":{}}},"UpdateAgentRequest":{"type":"object","description":"更新 Agent 白名单请求","properties":{"description":{"type":["string","null"],"description":"描述信息（可选）"},"collection_interval_secs":{"type":["integer","null"],"format":"int64","description":"采集间隔（秒），用于判断活跃状态。如果未设置，使用服务器全局配置","minimum":0}}},"UpdateAlertRuleRequest":{"type":"object","description":"更新告警规则请求","properties":{"name":{"type":["string","null"],"description":"规则名称（可选）"},"metric":{"type":["string","null"],"description":"监控指标（可选）"},"agent_pattern":{"type":["string","null"],"description":"Agent匹配模式（可选）"},"severity":{"type":["string","null"],"description":"告警级别（可选）"},"enabled":{"type":["boolean","null"],"description":"是否启用（可选）"},"config_json":{"type":["string","null"],"description":"规则配置JSON（可选）"},"silence_secs":{"type":["integer","null"],"format":"int64","description":"静默时间（秒）（可选）","minimum":0}}},"UpdateCloudAccountRequest":{"type":"object","description":"更新云账户请求","properties":{"display_name":{"type":["string","null"]},"description":{"type":["string","null"]},"account_name":{"type":["string","null"],"description":"云账号名称"},"secret_id":{"type":["string","null"]},"secret_key":{"type":["string","null"]},"regions":{"type":["array","null"],"items":{"type":"string"},"description":"地域列表（传入则完整替换）"},"collection_interval_secs":{"type":["integer","null"],"format":"int64"},"enabled":{"type":["boolean","null"]}}},"UpdateDictionaryRequest":{"type":"object","description":"更新字典条目请求","properties":{"dict_label":{"type":["string","null"],"description":"显示标签（可选）"},"dict_value":{"type":["string","null"],"description":"字典值（可选）"},"sort_order":{"type":["integer","null"],"format":"int32","description":"排序序号（可选）"},"enabled":{"type":["boolean","null"],"description":"是否启用（可选）"},"description":{"type":["string","null"],"description":"描述信息（可选）"},"extra_json":{"type":["string","null"],"description":"扩展 JSON（可选）"}}},"UpdateDictionaryTypeRequest":{"type":"object","description":"更新字典类型请求","properties":{"dict_type_label":{"type":["string","null"],"description":"显示标签（可选）"},"sort_order":{"type":["integer","null"],"format":"int32","description":"排序序号（可选）"},"description":{"type":["string","null"],"description":"描述信息（可选）"}}},"UpdateDomainRequest":{"type":"object","description":"更新域名请求","properties":{"port":{"type":["integer","null"],"format":"int32","description":"监控端口（可选）"},"enabled":{"type":["boolean","null"],"description":"是否启用监控（可选）"},"check_interval_secs":{"type":["integer","null"],"format":"int64","description":"检查间隔秒数（可选；传 null 清除自定义值）","minimum":0},"note":{"type":["string","null"],"description":"备注（可选）"}}},"UpdateNotificationChannelRequest":{"type":"object","description":"更新通知渠道请求","properties":{"name":{"type":["string","null"],"description":"渠道名称（可选）"},"description":{"type":["string","null"],"description":"描述信息（可选）"},"min_severity":{"type":["string","null"],"description":"最小告警级别（可选）"},"enabled":{"type":["boolean","null"],"description":"是否启用（可选）"},"config_json":{"type":["string","null"],"description":"渠道配置JSON（可选）"},"recipients":{"type":["array","null"],"items":{"type":"string"},"description":"收件人列表（可选，会替换现有收件人）"}}},"UpdateSilenceWindowRequest":{"type":"object","properties":{"start_time":{"type":["string","null"]},"end_time":{"type":["string","null"]},"recurrence":{"type":["string","null"]}}},"UpdateSystemConfigRequest":{"type":"object","description":"更新系统配置请求","properties":{"display_name":{"type":["string","null"]},"description":{"type":["string","null"]},"config_json":{"type":["string","null"]},"enabled":{"type":["boolean","null"]}}}},"securitySchemes":{"app_id_auth":{"type":"apiKey","in":"header","name":"ox-app-id"},"bearer_auth":{"type":"http","scheme":"bearer"}}},"tags":[{"name":"Health","description":"服务健康检查"},{"name":"Auth","description":"认证鉴权"},{"name":"Agents","description":"Agent 管理"},{"name":"Metrics","description":"指标查询"},{"name":"Alerts","description":"告警规则与历史"},{"name":"Certificates","description":"证书监控"},{"name":"Notifications","description":"通知渠道管理"},{"name":"Dashboard","description":"仪表盘概览"},{"name":"System","description":"系统管理"},{"name":"Dictionaries","description":"系统字典管理"},{"name":"Cloud","description":"云账户与云实例管理"}]}